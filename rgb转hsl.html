<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
	</head>
	<body>
		<script>
			function rgbToHsl(r, g, b) {
/*---------------------------var--------------------------------------------------------------*/
				var colorR = r / 255,
					colorG = g / 255,
					colorB = b / 255,
					colorMax = 0,
					colorMin = 0,
					H=0,S=0,L=0,

					arr = [colorR,colorG,colorB];
/*---------------------------Function--------------------------------------------------------*/
				var colorSort = function(){
					arr.sort(function(a,b){
						return a-b;
					});
					colorMin = arr[0];
					colorMax = arr[2];
					document.write("colorMax="+colorMax+"<br />");
					document.write("colorMin="+colorMin+"<br />");
				},  calculateL = function(){
						L =(colorMax + colorMin)/2;
						document.write("L="+L+"<br />");
				},  calculateS = function(){
						if(colorMax != colorMin){
							if(L < 0.5){
								alert(1);
								S = (colorMax - colorMin)/(colorMax + colorMin);
							}else{
								S = (colorMax - colorMin)/(2 - colorMax - colorMin);
							}
						}
				},	calculateH = function(){
					if(colorR = colorMax){
						H = (colorG - colorB)/(colorMax - colorMin); 
					}
					if(colorG = colorMax){
						H = 2 + (colorB - colorR)/(colorMax - colorMin);
					}
					if(colorB = colorMax){
						H = 4 + (colorR - colorG)/(colorMax - colorMin);
					}
					if(H < 0){
						H = H*80+360;
					}else{
						H = H*80;
					}
				}

/*--------------------------Init-----------------------------------------------------------------*/
				init = function(){
					colorSort();
					calculateL();
					calculateS();
					calculateH();
					
				}

				init();
				return [H,S,L];
		}
		 		document.write(rgbToHsl(255,169,239));
		  		document.write(rgbToHsl(249,128,215));
	 			document.write(rgbToHsl(247,121,211));
	 			document.write(rgbToHsl(229,81,172));
	 			document.write(rgbToHsl(214,20,124));

		</script>
	</body>
</html>
